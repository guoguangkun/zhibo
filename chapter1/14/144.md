###1.4.4 平滑升级
当需要将正在运行中的nginx升级、添加/删除服务器模块时，如果我们先停掉服务做相应修改后再启动服务，服务器就要在一段时间内不能被访问。nginx有一大优势就是可以在不中断服务的情况下，使用新版本、重编译的nginx可执行程序替换旧版本的可执行程序，这样就不会影响对服务器的访问。  
我们来介绍一下具体的升级步骤。
（1）使用新的可执行程序替换旧的可执行程序，对于编译安装的 nginx，可以将新版本编译安装到旧版本的 nginx 安装路径中。替换之前，最好备份一下旧的可执行文件。
（2）发送以下指令：kill -USR2 【旧版本的Nginx主进程号】
（3）旧版本 nginx 的主进程将重命名它的 pid 文件为 .oldbin(例如：/usr/local/nginx/logs/nginx.pid.oldbin)，然后执行新版本的 nginx 可执行程序，依次启动新的主进程和新的工作进程。
（4） 此时，新、旧版本的 nginx 实例会同时运行，共同处理输入的请求。要逐步停止旧版本的 nginx 实例，你必须发送 WINCH 信号给旧的主进程，然后，它的工作进程就将开始从容关闭：kill -WINCH 【旧版本的Nginx主进程号】
（5）一段时间后，旧的工作进程(worker process)处理了所有已连接的请求后退出，仅由新的工作进程来处理输入的请求了。
（6）这时候，我们可以决定是使用新版本，还是恢复到旧版本：
kill -HUP 【旧的主进程号】：nginx 将在不重载配置文件的情况下启动它的工作进程
kill -QUIT 【新的主进程号】：从容关闭其工作进程(worker process) 
kill -TERM 【新的主进程号】：强制退出
kill 【新的主进程号或旧的主进程号】：如果因为某些原因新的工作进程不能退出，则向其发送 kill 信号。
新的主进程退出后，旧的主进程会移除 .oldbin 后缀，恢复为它 的 .pid 文件，这样，一切就恢复到升级之前了。如果尝试升级成功，而你也希望保留新的服务器时，可发送 QUIT 信号给旧的主进程，使其退出而只留下新的服务器运行。