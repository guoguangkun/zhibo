## 5.3 IJKplayer框架介绍

随着互联网技术的飞速发展，移动端播放视频的需求如日中天，由此也催生了一批开源/闭源的播放器，但是无论这个播放器功能是否强大、兼容性是否优秀，它的基本模块通常都是由以下部分组成：事务处理、数据的接收和解复用、音视频解码以及渲染，其基本框架如下图所示：

针对各种铺天盖地的播放器项目，我们选取了比较出众的IJKplayer进行源码剖析。它是一个基于FFPlay的轻量级Android/iOS视频播放器，实现了跨平台的功能，API易于集成；编译配置可裁剪，方便控制安装包大小。

### 一、总体说明

打开ijkplayer，可看到其主要目录结构如下:

```
tool：初始化项目工程脚本
config：编译ffmpeg使用的配置文件
extra：存放编译ijkplayer所需的依赖源文件, 如ffmpeg、openssl等
ijkmedia：核心代码
    ijkplayer：播放器数据下载及解码相关
    ijksdl：音视频数据渲染相关
ios：iOS平台上的上层接口封装以及平台相关方法
android：android平台上的上层接口封装以及平台相关方法
```

在功能的具体实现上，iOS和Android平台的差异主要表现在视频硬件解码以及音视频渲染方面，两者实现的载体区别如下表所示：

| Platform | Hardware Codec | Video Render | Audio Output |
| :--- | :--- | :--- | :--- |
| iOS | VideoToolBox | OpenGL ES | AudioQueue |
| Android | MediaCodec | OpenGL ES、MediaCodec | OpenSL ES、AudioTrack |



